# 六大设计原则

## 一、单一职责原则(Single Responsibility Principle，SRP)

​        ***应该有且仅有一个原因引起类的变更。因为是面向接口编程，对外暴露的是接口，所以单一职责原则应该是要求一个接口或类只有一个原因引起变化，也就是一个接口或类只有一个职责。***

![1566559223393](C:\Users\林链锋\AppData\Roaming\Typora\typora-user-images\1566559223393.png)

图1-5 中要用到类的组合，会增加类的复杂性，比较合理的设计应该是图 1-6 的设计，对于类的单一职责往往在实际中不好对职责的边界进行划分。

***单一职责原则的好处***：

- **类的复杂性降低**，实现什么职责都有清晰明确的定义
- **可读性提高**，复杂性降低，那当然可读性提高了
- **可维护性提高**，可读性提高，那当然更容易维护了
- **变更引起的风险降低**

单一职责原则适用于接口、类和方法。即一个方法尽可能的做一件事情。***单一职责原则使用建议，接口一定要做到单一职责，类的设计尽量做到只有一个原因引起变化，一个方法尽可能的做一件事情。***

## 二、里氏替换原则(Liskov Substitution Principle，LSP)

- 第一种定义：***如果对每一个类型为 S 的对象 o1，都有类型为 T 的对象 o2，使得以 T 定义的所有程序 P 在所有的对象 o1 都代换成 o2 时，程序 P 的行为没有发生变化，那么类型 S 是类型 T 的子类型。***

- 第二种定义： ***所有引用基类的地方必须能透明地使用其子类的对象。***即只要父类能出现的地方子类就可以出现，而且替换成子类也不会产生任何错误或异常，使用者可能根本就不需要知道是父类还是子类。但是反过来就不行了，有子类出现的地方，父类未必能适应。

在面向对象的语言中，对应的就是继承机制。

**继承的优点：**

- ***代码共享，减少创建类的工作量，每个子类都拥有父类的方法和属性***
- ***提高代码的重用性***
- ***子类可以形似父类，但又异于父类***
- ***提高代码的可扩展性***
- ***提高产品或项目的开放性***

**继承的缺点：**

- ***继承是侵入性的。***只要继承，就必须拥有父类的所有属性和方法
- ***降低代码的灵活性。***子类必须拥有父类的属性和方法，让子类多了些约束
- ***增强了耦合性。***当父类的常量、变量和方法被修改时，需要考虑子类的修改。

**注意：**

- ***在类中调用其他类时务必要使用父类或接口，如果不能使用父类或接口，则说明类的设计已经违背了 LSP 原则***
- ***如果子类不能完整地实现父类的方法，或者父类的某些方法在子类中已经发生“畸变”，则建议断开父子集成关系，采用依赖、聚集、组合等关系代替集成。***
- ***覆盖或实现父类的方法时输入参数可以被放大***
- ***覆写或实现父类的方法时输出结果可以被缩小***

## 三、依赖倒置原则(Dependence Inversion Principle，DIP)

该原则包含有三层含义：

- ***高层模块不应该依赖底层模块，两者都应该依赖其抽象***
- ***抽象不应该依赖细节***
- ***细节应该依赖抽象***

在 Java 语言中的表现就是：

- ***模块间的依赖通过抽象发生，实现类之间不发生直接的依赖关系，其依赖关系是通过接口或抽象类产生的***
- ***接口或抽象类不依赖于实现类***
- ***实现类依赖接口或抽象类***

也就是“面向接口编程”——OOD(Object-Oriented Design，面向对象设计)的精髓之一。



